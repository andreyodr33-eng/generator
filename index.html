<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Генератор QR-коду</title>
<!-- Подключение PWA манифеста -->
<link rel="manifest" href="manifest.json">
<link rel="icon" href="favicon.ico" sizes="32x32" type="image/x-icon">         
<meta name="theme-color" content="#4CAF50">
<!-- Регистрация Service Worker -->
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./service-worker.js')
    .then(() => console.log('Service Worker зарегистрирован'));
}
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<style>


body {
  margin: 0;
  background: #000;
  color: #00ff99;
  font-family: monospace;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
} 

.box {
  background: #111;
  border: 2px solid #00ff99;
  border-radius: 15px;
  padding: 25px;
  max-width: 350px;
  width: 90%;
  box-sizing: border-box;
  text-align: center;
}

input, button {
  width: 100%;
  padding: 14px;
  font-size: 16px;
  border-radius: 8px;
  border: 2px solid #00ff99;
  background: #000;
  color: #00ff99;
  margin-top: 15px;
  box-sizing: border-box;
}

button {
  cursor: pointer;
  transition: 0.2s;
}
   button:hover {
  background: #00ff99;
  color: #000;
}
 #qrcode { 
   display: flex;
   margin: 20px auto;
   justify-content: center;
 }

 </style>

</head>

<body>
<div class="box">
   <h2>Генератор QR-коду</h2>
   <p>Введіть номер карти або IBAN:</p>
   <input type="text" id="cardInput" placeholder="Наприклад 4441114407876992">
   <button onclick="generateQR()">Створити QR</button>
   <div id="qrcode"></div>
</div>

<script>
function generateQR() {

    const cardNumber = document.getElementById("cardInput").value.trim();

    if (!cardNumber) {
        alert("Введіть номер карти!");
        return;
    }

    // ВАЖНО — строка должна быть в кавычках
    const url = `https://andreyodr33-eng.github.io/developer/?data=${cardNumber}`;

    // Открываем новую вкладку
    const newWindow = window.open("", "_blank");

    // Создаем простую белую страницу
    newWindow.document.write(`
        <html>
        <head>
            <title>QR Code</title>
            <style>
                body {
                    margin: 0;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                    background: white;
                }
            </style>
        </head>
        <body>
            <div id="qrcode"></div>

            <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"><\/script>
            <script>
                new QRCode(document.getElementById("qrcode"), {
                    text: "${url}",
                    width: Math.min(window.innerWidth * 0.9, 400),
                    height: Math.min(window.innerWidth * 0.9, 400),
                    correctLevel: QRCode.CorrectLevel.H
                });
            <\/script>
        </body>
        </html>
    `);

    newWindow.document.close();
}
</script>

  
<script>
// Список продавцов (id => название)
const sellers = {
    "117": "Владимирский, место 117",
    "118": "Владимирский, место 118",
    "201": "Житний рынок, место 201"
};

// Создаем селектор продавца
const box = document.querySelector(".box");
const select = document.createElement("select");
select.id = "sellerSelect";
select.style.marginTop = "10px";
select.style.padding = "10px";
select.style.fontSize = "16px";
select.style.borderRadius = "8px";
select.style.border = "2px solid #00ff99";
select.style.background = "#000";
select.style.color = "#00ff99";

// Добавляем опции
for (const key in sellers) {
    const option = document.createElement("option");
    option.value = key;
    option.text = sellers[key];
    select.appendChild(option);
}

box.insertBefore(select, document.getElementById("qrcode"));

// Переписываем generateQR только для URL
const originalGenerateQR = generateQR;
generateQR = function() {
    const cardNumber = document.getElementById("cardInput").value.trim();
    const sellerId = document.getElementById("sellerSelect").value;

    if (!cardNumber) {
        alert("Введіть номер карти!");
        return;
    }

    // Добавляем параметр seller в ссылку
    const url = `https://andreyodr33-eng.github.io/developer/?data=${cardNumber}&seller=${sellerId}`;

    // В остальном оставляем открытие новой вкладки и генерацию QR
    const newWindow = window.open("", "_blank");

    newWindow.document.write(`
        <html>
        <head>
            <title>QR Code</title>
            <style>
                body {
                    margin:0;
                    display:flex;
                    justify-content:center;
                    align-items:center;
                    height:100vh;
                    background:white;
                }
            </style>
        </head>
        <body>
            <div id="qrcode"></div>
            <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"><\/script>
            <script>
                new QRCode(document.getElementById("qrcode"), {
                    text: "${url}",
                    width: Math.min(window.innerWidth * 0.9, 400),
                    height: Math.min(window.innerWidth * 0.9, 400),
                    correctLevel: QRCode.CorrectLevel.H
                });
            <\/script>
        </body>
        </html>
    `);
    newWindow.document.close();
};
</script>
</body>
</html>













